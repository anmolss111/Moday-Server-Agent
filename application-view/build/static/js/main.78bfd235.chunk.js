(this["webpackJsonpmonday-integration-quickstart-app"]=this["webpackJsonpmonday-integration-quickstart-app"]||[]).push([[0],{24:function(e,t,a){e.exports=a(47)},29:function(e,t,a){},31:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(17),i=a.n(l),s=(a(29),a(30),a(18)),c=a(19),d=a(23),r=a(22),u=(a(31),a(20)),m=a.n(u),p=a(10),f=a(6),h=a(5),v=a(21),g=m()(),b=function(e){Object(d.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getContext=function(e){var t=e.data;console.log("context!",t),n.setState({context:t});var a,o=t.boardIds||[t.boardId],l=[],i={};g.api("query { boards(ids:[".concat(o,"]) { id, items { id, column_values { id, value } } }}")).then((function(e){console.log(e),e.data.boards[0].items.forEach((function(e,t){console.log(e.id),l.push(e.id),i[e.id]=[],e.column_values.forEach((function(t,n){if("creation_log"!=t.id&&"last_updated"!=t.id){var o=JSON.parse(t.value);console.log(o,a),void 0!=o&&o.linkedPulseIds.forEach((function(t,n){i[e.id].push(t.linkedPulseId),void 0==a&&(a=t.linkedPulseId)}))}}))})),g.api("query { items (ids:[".concat(a,"]) { id, name, board { id } }}")).then((function(e){console.log(l,i),n.setState({allItemIds:l,componentMap:i}),n.getData(e.data.items[0].board.id)}))}))},n.state={settings:{},allItemIds:[],componentMap:{},tableRender:[],modulesMap:{}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){g.listen("context",this.getContext)}},{key:"getData",value:function(e){var t=this;g.api("query { boards(ids:[".concat(e,"]) { id, items { id, column_values { id, value } } }}")).then((function(e){console.log(e);var a=[],n=[];e.data.boards[0].items.forEach((function(e,t){console.log(e.id),n.push(e.id);var o=[];e.column_values.forEach((function(e,t){if("subitems"==e.id&&null!=e.value){var a=JSON.parse(e.value);console.log(a),a.linkedPulseIds.forEach((function(e,t){o.push(String(e.linkedPulseId)),n.push(String(e.linkedPulseId))}))}})),a.push({tableItemId:e.id,tableColumnItemIds:o})})),t.getTableData(a,n)}))}},{key:"getTableData",value:function(e,t,a){var n=this;console.log(e,t);var o=[];g.api("query { items (ids:[".concat(t,"]) { id, name, column_values { id, text } }}")).then((function(l){console.log(l);var i={};l.data.items.forEach((function(e,t){i[e.id]=t}));var s={};e.forEach((function(e,t){console.log(l.data.items[i[e.tableItemId]].name),s[l.data.items[i[e.tableItemId]].name]=t,o.push({itemId:e.tableItemId,name:l.data.items[i[e.tableItemId]].name})})),console.log(i,s),e.forEach((function(e,t){var a=[];e.tableColumnItemIds.forEach((function(e,t){var n=void 0,o=void 0;l.data.items[i[e]].column_values.forEach((function(e,t){"dropdown"==e.id&&(n=e.text),"dropdown"!=e.id&&"creation_log"!=e.id&&"last_updated"!=e.id&&(o=e.text)})),"Foreign"==n?a.push({name:l.data.items[i[e]].name,type:n,forgienKeyTable:s[o]}):a.push({name:l.data.items[i[e]].name,type:n})})),o[t].columns=a})),console.log(o),n.setState({tableRender:o}),n.getComponentData(t,a)}))}},{key:"getComponentData",value:function(e,t){var a=this;console.log(this.state.allItemIds,this.state.componentMap),g.api("query { items (ids:[".concat(this.state.allItemIds,"]) { id, name, column_values { id, text }, group { id, title } }}")).then((function(e){console.log(e);var t={};e.data.items.forEach((function(e){void 0==t[e.group.title]&&(t[e.group.title]=[]);var a="";e.column_values.forEach((function(e,t){"creation_log"!=e.id&&"last_updated"!=e.id&&(a=e.text)})),e.tables=a,t[e.group.title].push(e)})),console.log(t),a.setState({modulesMap:t})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement(p.a,{fluid:!0},o.a.createElement(f.a,null,Object.keys(this.state.modulesMap).map((function(t,a){return o.a.createElement(h.a,{sm:6,key:a},o.a.createElement(f.a,null,o.a.createElement(h.a,{sm:12},o.a.createElement(v.a,{striped:!0,bordered:!0,hover:!0,variant:"dark"},o.a.createElement("thead",null,o.a.createElement("tr",{className:"text-center"},o.a.createElement("th",{style:{color:"#dc3545"}},t))),o.a.createElement("tbody",null,e.state.modulesMap[t].map((function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",null,o.a.createElement(p.a,null,o.a.createElement(f.a,null,o.a.createElement(h.a,{sm:4,style:{color:"#007bff",paddingTop:10,paddingBottom:10}},o.a.createElement("b",null,e.name)),o.a.createElement(h.a,{sm:8,style:{color:"#ffc107",paddingTop:10,paddingBottom:10}},o.a.createElement("b",null,e.tables))))))})))))))})))))}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.78bfd235.chunk.js.map